


PAGE  59,132

;ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
;ÛÛ                                                                      ÛÛ
;ÛÛ                             4096                                     ÛÛ
;ÛÛ                                                                      ÛÛ
;ÛÛ      Created:   1-Jan-80                                             ÛÛ
;ÛÛ      Version:                                                        ÛÛ
;ÛÛ      Passes:    5          Analysis Options on: none                 ÛÛ
;ÛÛ                                                                      ÛÛ
;ÛÛ                                                                      ÛÛ
;ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ

data_1e         equ     0Ah                     ; (0000:000A=0E6h)
data_3e         equ     12h                     ; (0000:0012=70h)
data_4e         equ     14h                     ; (0000:0014=0FF54h)
data_5e         equ     18h                     ; (0000:0018=0EB52h)
data_6e         equ     1Ah                     ; (0000:001A=0F000h)
data_7e         equ     0FD9Fh                  ; (0000:FD9F=19B4h)
data_8e         equ     0FDA1h                  ; (0000:FDA1=21CDh)
data_9e         equ     0FDA3h                  ; (0000:FDA3=0B450h)
data_10e        equ     0Ah                     ; (068A:000A=6E41h)
data_12e        equ     0FD9Fh                  ; (068A:FD9F=6580h)
data_13e        equ     0FDA1h                  ; (068A:FDA1=0C004h)
data_14e        equ     0FDA3h                  ; (068A:FDA3=8026h)
data_15e        equ     0                       ; (3A6A:0000=0FFh)
data_16e        equ     1                       ; (3A6A:0001=0FFFFh)
data_17e        equ     3                       ; (3A6A:0003=0FFFFh)
data_18e        equ     0                       ; (3BCB:0000=0FFh)
data_19e        equ     1                       ; (3BCB:0001=0FFFFh)
data_20e        equ     3                       ; (3BCB:0003=0FFFFh)
data_21e        equ     2                       ; (3BCC:0002=0)
data_22e        equ     4                       ; (3BCC:0004=0)
data_23e        equ     6                       ; (3BCC:0006=0)
data_24e        equ     8                       ; (3BCC:0008=0)
data_25e        equ     0Ah                     ; (3BCC:000A=0)
data_26e        equ     12h                     ; (3BCC:0012=0)
data_27e        equ     14h                     ; (3BCC:0014=0)
data_28e        equ     18h                     ; (3BCC:0018=0)
data_30e        equ     20h                     ; (3BCC:0020=0)
data_58e        equ     1224h                   ; (3BCC:1224=0)
data_60e        equ     1228h                   ; (3BCC:1228=0)
data_61e        equ     1229h                   ; (3BCC:1229=0)
data_62e        equ     122Bh                   ; (3BCC:122B=0)
data_63e        equ     122Dh                   ; (3BCC:122D=0)
data_65e        equ     1231h                   ; (3BCC:1231=0)
data_67e        equ     1235h                   ; (3BCC:1235=0)
data_69e        equ     1239h                   ; (3BCC:1239=0)
data_71e        equ     123Dh                   ; (3BCC:123D=0)
data_73e        equ     1241h                   ; (3BCC:1241=0)
data_75e        equ     1245h                   ; (3BCC:1245=3BCCh)
data_76e        equ     1247h                   ; (3BCC:1247=0)
data_77e        equ     1249h                   ; (3BCC:1249=0)
data_78e        equ     124Bh                   ; (3BCC:124B=0)
data_79e        equ     124Ch                   ; (3BCC:124C=0)
data_80e        equ     124Eh                   ; (3BCC:124E=3BCCh)
data_81e        equ     1250h                   ; (3BCC:1250=0)
data_82e        equ     1251h                   ; (3BCC:1251=0)
data_83e        equ     1252h                   ; (3BCC:1252=0)
data_84e        equ     12A2h                   ; (3BCC:12A2=0)
data_85e        equ     12A3h                   ; (3BCC:12A3=0)
data_86e        equ     12A5h                   ; (3BCC:12A5=0)
data_87e        equ     12A7h                   ; (3BCC:12A7=0)
data_88e        equ     12A9h                   ; (3BCC:12A9=0)
data_89e        equ     12ABh                   ; (3BCC:12AB=0)
data_90e        equ     12ADh                   ; (3BCC:12AD=0)
data_91e        equ     12AFh                   ; (3BCC:12AF=0)
data_92e        equ     12B1h                   ; (3BCC:12B1=0)
data_93e        equ     12B3h                   ; (3BCC:12B3=0)
data_94e        equ     12B5h                   ; (3BCC:12B5=0)
data_95e        equ     12DAh                   ; (3BCC:12DA=0)
data_96e        equ     12DBh                   ; (3BCC:12DB=0)
data_97e        equ     12DDh                   ; (3BCC:12DD=0EF4h)
data_98e        equ     12DFh                   ; (3BCC:12DF=0)
data_99e        equ     12E1h                   ; (3BCC:12E1=0)
data_100e       equ     12E2h                   ; (3BCC:12E2=0)
data_101e       equ     12E3h                   ; (3BCC:12E3=0)
data_102e       equ     12E5h                   ; (3BCC:12E5=0)
data_103e       equ     12E6h                   ; (3BCC:12E6=0)
data_104e       equ     12E8h                   ; (3BCC:12E8=0)
data_105e       equ     12EAh                   ; (3BCC:12EA=0)
data_106e       equ     12ECh                   ; (3BCC:12EC=0)
data_107e       equ     12EEh                   ; (3BCC:12EE=0)
data_108e       equ     12EFh                   ; (3BCC:12EF=0)
data_109e       equ     12F0h                   ; (3BCC:12F0=0)
data_110e       equ     12F1h                   ; (3BCC:12F1=0)
data_111e       equ     12FFh                   ; (3BCC:12FF=0)
data_112e       equ     1301h                   ; (3BCC:1301=0)
data_113e       equ     1303h                   ; (3BCC:1303=0)
data_115e       equ     1307h                   ; (3BCC:1307=0)
data_116e       equ     1357h                   ; (3BCC:1357=0)
data_117e       equ     1359h                   ; (3BCC:1359=0EF4h)
data_118e       equ     135Bh                   ; (3BCC:135B=0)
data_119e       equ     135Dh                   ; (3BCC:135D=0)
data_120e       equ     15FEh                   ; (3BCC:15FE=0)
data_121e       equ     7C0Ah                   ; (3BCC:7C0A=0)
data_122e       equ     7C0Eh                   ; (3BCC:7C0E=0)
data_123e       equ     7CD7h                   ; (3BCC:7CD7=0)
data_124e       equ     7CE2h                   ; (3BCC:7CE2=0)
data_125e       equ     7CE7h                   ; (3BCC:7CE7=0)
data_126e       equ     8B4Bh                   ; (3BCC:8B4B=0)
data_127e       equ     1                       ; (48FF:0001=0)
data_128e       equ     1                       ; (5200:0001=0)

seg_a           segment byte public
                assume  cs:seg_a, ds:seg_a


                org     100h

_4096           proc    far

start:
                jmp     loc_19                  ; (0488)
                and     [si],dx
                pop     cx
                cmp     ax,200h
                jae     loc_1                   ; Jump if above or =
                mov     dx,offset data_41       ; (3BCC:01FC=4Dh)
                mov     ah,9
                int     21h                     ; DOS Services  ah=function 09h
                                                ;  display char string at ds:dx
                int     20h                     ; Program Terminate
loc_1:
                mov     byte ptr data_35,19h    ; (3BCC:01E7=18h)
                mov     ah,0Fh
                int     10h                     ; Video display   ah=functn 0Fh
                                                ;  get state, al=mode, bh=page
                mov     data_36,ah              ; (3BCC:01E8=50h)
                mov     dx,offset data_41+1Bh   ; (3BCC:0217=0Dh)
                mov     ah,9
                int     21h                     ; DOS Services  ah=function 09h
                                                ;  display char string at ds:dx
                xor     bx,bx                   ; Zero register
                mov     ah,45h                  ; 'E'
                int     21h                     ; DOS Services  ah=function 45h
                                                ;  duplicate handle bx, ax=new #
                mov     bp,ax
                mov     ah,3Eh                  ; '>'
                int     21h                     ; DOS Services  ah=function 3Eh
                                                ;  close file, bx=file handle
                mov     bx,2
                mov     ah,45h                  ; 'E'
                int     21h                     ; DOS Services  ah=function 45h
                                                ;  duplicate handle bx, ax=new #
loc_2:
                cld                             ; Clear direction
                mov     dx,offset data_43       ; (3BCC:021A=0)
                mov     cx,1000h
                mov     bx,bp
                mov     ah,3Fh                  ; '?'
                int     21h                     ; DOS Services  ah=function 3Fh
                                                ;  read file, cx=bytes, to ds:dx
                or      ax,ax                   ; Zero ?
                jnz     loc_4                   ; Jump if not zero
loc_3:
                int     20h                     ; Program Terminate
loc_4:
                mov     cx,ax
                mov     si,dx
loc_5:
                lodsb                           ; String [si] to al
                cmp     al,1Ah
                je      loc_3                   ; Jump if equal
                cmp     al,0Dh
                jne     loc_6                   ; Jump if not equal
                mov     byte ptr data_38,1      ; (3BCC:01EA=1)
                jmp     short loc_10            ; (01AE)
loc_6:
                cmp     al,0Ah
                jne     loc_7                   ; Jump if not equal
                inc     data_37                 ; (3BCC:01E9=1)
                jmp     short loc_10            ; (01AE)
loc_7:
                cmp     al,8
                jne     loc_8                   ; Jump if not equal
                cmp     byte ptr data_38,1      ; (3BCC:01EA=1)
                je      loc_10                  ; Jump if equal
                dec     data_38                 ; (3BCC:01EA=1)
                jmp     short loc_10            ; (01AE)
loc_8:
                cmp     al,9
                jne     loc_9                   ; Jump if not equal
                mov     ah,data_38              ; (3BCC:01EA=1)
                add     ah,7
                and     ah,0F8h
                inc     ah
                mov     data_38,ah              ; (3BCC:01EA=1)
                jmp     short loc_10            ; (01AE)
loc_9:
                cmp     al,7
                je      loc_10                  ; Jump if equal
                inc     data_38                 ; (3BCC:01EA=1)
                mov     ah,data_38              ; (3BCC:01EA=1)
                cmp     ah,data_36              ; (3BCC:01E8=50h)
                jbe     loc_10                  ; Jump if below or =
                inc     data_37                 ; (3BCC:01E9=1)
                mov     byte ptr data_38,1      ; (3BCC:01EA=1)
loc_10:
                mov     dl,al
                mov     ah,2
                int     21h                     ; DOS Services  ah=function 02h
                                                ;  display char dl
                mov     ah,data_37              ; (3BCC:01E9=1)
                cmp     ah,data_35              ; (3BCC:01E7=18h)
                jb      loc_11                  ; Jump if below
                mov     dx,offset data_39       ; (3BCC:01F0=0Dh)
                mov     ah,9
                int     21h                     ; DOS Services  ah=function 09h
                                                ;  display char string at ds:dx
                mov     ah,0Ch
                mov     al,1
                int     21h                     ; DOS Services  ah=function 0Ch
                                                ;  clear keybd buffer & input al
                mov     dx,offset data_41+1Bh   ; (3BCC:0217=0Dh)
                mov     ah,9
                int     21h                     ; DOS Services  ah=function 09h
                                                ;  display char string at ds:dx
                mov     byte ptr data_38,1      ; (3BCC:01EA=1)
                mov     byte ptr data_37,1      ; (3BCC:01E9=1)
                dec     si
                inc     cx
loc_11:
                dec     cx
                jz      loc_12                  ; Jump if zero
                jmp     loc_5                   ; (0152)
loc_12:
                jmp     loc_2                   ; (013B)
data_35         db      18h
data_36         db      50h
data_37         db      1
data_38         db      1
                db      0, 0, 0, 0, 0
data_39         db      0Dh, '-- More --$'
data_41         db      'MORE: Incorrect DOS version', 0Dh
                db      0Ah, '$'
data_43         dw      0, 0, 0
                db       00h,0E9h,0A7h, 00h,0B4h, 30h
                db      0CDh, 21h, 86h,0E0h, 3Dh, 00h
                db       02h, 73h, 09h,0BAh,0FCh, 01h
                db      0B4h, 09h,0CDh, 21h,0CDh, 20h
                db      0C6h, 06h,0E7h, 01h, 19h,0B4h
                db       0Fh,0CDh, 00h,0FEh, 3Ah, 55h
                db       8Bh,0ECh, 50h, 81h, 7Eh, 04h
                db       00h,0C0h, 73h, 0Ch, 2Eh,0A1h
                db       47h, 12h, 39h, 46h, 04h, 76h
                db       03h
loc_13:
                pop     ax
                pop     bp
                iret                            ; Interrupt return
                db       2Eh, 80h, 3Eh, 50h, 12h, 01h
                db       74h, 32h, 8Bh, 46h, 04h, 2Eh
                db      0A3h, 2Fh, 12h, 8Bh, 46h, 02h
                db       2Eh,0A3h, 2Dh, 12h, 72h, 15h
                db       58h, 5Dh, 2Eh, 8Eh, 16h,0DDh
                db       12h, 2Eh, 8Bh, 26h,0DFh, 12h
                db       2Eh,0A0h,0E5h, 12h,0E6h, 21h
                db      0E9h,0D9h
                db      0Ch
loc_14:
                and     word ptr [bp+6],0FEFFh
                mov     al,cs:data_102e         ; (3BCC:12E5=0)
                out     21h,al                  ; port 21h, 8259-1 int comands
                jmp     short loc_13            ; (0257)
loc_15:
                dec     byte ptr cs:data_82e    ; (3BCC:1251=0)
                jnz     loc_13                  ; Jump if not zero
                and     word ptr [bp+6],0FEFFh
                call    sub_21                  ; (100F)
                call    sub_18                  ; (0FDA)
                lds     dx,dword ptr cs:data_65e        ; (3BCC:1231=0) Load 32 bit ptr
                mov     al,1
                call    sub_27                  ; (11BC)
                call    sub_20                  ; (1006)
                jmp     short loc_14            ; (0287)

_4096           endp

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_1           proc    near
                push    ds
                push    si
                xor     si,si                   ; Zero register
                mov     ds,si
                xor     ah,ah                   ; Zero register
                mov     si,ax
                shl     si,1                    ; Shift w/zeros fill
                shl     si,1                    ; Shift w/zeros fill
                mov     bx,[si]
                mov     es,[si+2]
                pop     si
                pop     ds
                retn
sub_1           endp

                mov     word ptr cs:data_118e,1600h     ; (3BCC:135B=0)
                mov     cs:data_101e,ax         ; (3BCC:12E3=0)
                mov     ah,30h                  ; '0'
                int     21h                     ; DOS Services  ah=function 30h
                                                ;  get DOS version number ax
                mov     cs:data_107e,al         ; (3BCC:12EE=0)
                mov     cs:data_75e,ds          ; (3BCC:1245=3BCCh)
                mov     ah,52h                  ; 'R'
                int     21h                     ; DOS Services  ah=function 52h
                                                ;  get DOS data table ptr es:bx
                mov     ax,es:[bx-2]
                mov     cs:data_76e,ax          ; (3BCC:1247=0)
                mov     es,ax
                mov     ax,es:data_128e         ; (5200:0001=0)
                mov     cs:data_77e,ax          ; (3BCC:1249=0)
                push    cs
                pop     ds
                mov     al,1
                call    sub_1                   ; (02B5)
                mov     ds:data_65e,bx          ; (3BCC:1231=0)
                mov     word ptr ds:data_65e+2,es       ; (3BCC:1233=70h)
                mov     al,21h                  ; '!'
                call    sub_1                   ; (02B5)
                mov     ds:data_63e,bx          ; (3BCC:122D=0)
                mov     word ptr ds:data_63e+2,es       ; (3BCC:122F=70h)
                mov     byte ptr ds:data_81e,0  ; (3BCC:1250=0)
                mov     dx,23h
                mov     al,1
                call    sub_27                  ; (11BC)
                pushf                           ; Push flags
                pop     ax
                or      ax,100h
                push    ax
                in      al,21h                  ; port 21h, 8259-1 int IMR
                mov     ds:data_102e,al         ; (3BCC:12E5=0)
                mov     al,0FFh
                out     21h,al                  ; port 21h, 8259-1 int comands
                popf                            ; Pop flags
                mov     ah,52h                  ; 'R'
                pushf                           ; Push flags
                call    dword ptr ds:data_63e   ; (3BCC:122D=0)
                pushf                           ; Push flags
                pop     ax
                and     ax,0FEFFh
                push    ax
                popf                            ; Pop flags
                mov     al,ds:data_102e         ; (3BCC:12E5=0)
                out     21h,al                  ; port 21h, 8259-1 int comands
                push    ds
                lds     dx,dword ptr ds:data_65e        ; (3BCC:1231=0) Load 32 bit ptr
                mov     al,1
                call    sub_27                  ; (11BC)
                pop     ds
                les     di,dword ptr ds:data_63e        ; (3BCC:122D=0) Load 32 bit ptr
                mov     ds:data_67e,di          ; (3BCC:1235=0)
                mov     word ptr ds:data_67e+2,es       ; (3BCC:1237=70h)
                mov     byte ptr ds:data_78e,0EAh       ; (3BCC:124B=0)
                mov     word ptr ds:data_79e,2CCh       ; (3BCC:124C=0)
                mov     ds:data_80e,cs          ; (3BCC:124E=3BCCh)
                call    sub_18                  ; (0FDA)
                mov     ax,4B00h
                mov     ds:data_100e,ah         ; (3BCC:12E2=0)
                mov     dx,data_30e+1           ; (3BCC:0021=0)
                push    word ptr ds:data_30e    ; (3BCC:0020=0)
                int     21h                     ; DOS Services  ah=function 4Bh
                                                ;  run progm @ds:dx, parm @es:bx
                pop     word ptr ds:data_30e    ; (3BCC:0020=0)
                add     word ptr es:[di-4],9
                nop
                mov     es,ds:data_75e          ; (3BCC:1245=3BCCh)
                mov     ds,ds:data_75e          ; (3BCC:1245=3BCCh)
                sub     word ptr ds:data_21e,161h       ; (3BCC:0002=0)
                mov     bp,ds:data_21e          ; (3BCC:0002=0)
                mov     dx,ds
                sub     bp,dx
                mov     ah,4Ah                  ; 'J'
                mov     bx,0FFFFh
                int     21h                     ; DOS Services  ah=function 4Ah
                                                ;  change mem allocation, bx=siz
                mov     ah,4Ah                  ; 'J'
                int     21h                     ; DOS Services  ah=function 4Ah
                                                ;  change mem allocation, bx=siz
                dec     dx
                mov     ds,dx
                cmp     byte ptr ds:data_18e,5Ah        ; (3BCB:0000=0FFh) 'Z'
                nop                             ;*ASM fixup - sign extn byte
                je      loc_16                  ; Jump if equal
                dec     byte ptr cs:data_100e   ; (3BCC:12E2=0)
loc_16:
                cmp     byte ptr cs:data_100e,0 ; (3BCC:12E2=0)
                je      loc_17                  ; Jump if equal
                mov     byte ptr ds:data_18e,4Dh        ; (3BCB:0000=0FFh) 'M'
loc_17:
                mov     ax,ds:data_20e          ; (3BCB:0003=0FFFFh)
                mov     bx,ax
                sub     ax,161h
                add     dx,ax
                mov     ds:data_20e,ax          ; (3BCB:0003=0FFFFh)
                inc     dx
                mov     es,dx
                mov     byte ptr es:data_15e,5Ah        ; (3A6A:0000=0FFh) 'Z'
                push    word ptr cs:data_77e    ; (3BCC:1249=0)
                pop     word ptr es:data_16e    ; (3A6A:0001=0FFFFh)
                mov     word ptr es:data_17e,160h       ; (3A6A:0003=0FFFFh)
                inc     dx
                mov     es,dx
                push    cs
                pop     ds
                mov     cx,0B00h
                mov     si,data_120e            ; (3BCC:15FE=0)
                mov     di,si
                std                             ; Set direction flag
                rep     movsw                   ; Rep when cx >0 Mov [si] to es:[di]
                cld                             ; Clear direction
                push    es
                mov     ax,1EEh
                push    ax
                mov     es,cs:data_75e          ; (3BCC:1245=3BCCh)
                mov     ah,4Ah                  ; 'J'
                mov     bx,bp
                int     21h                     ; DOS Services  ah=function 4Ah
                                                ;  change mem allocation, bx=siz
                retf
                call    sub_18                  ; (0FDA)
                mov     cs:data_80e,cs          ; (3BCC:124E=3BCCh)
                call    sub_18                  ; (0FDA)
                push    cs
                pop     ds
                mov     byte ptr ds:data_84e,14h        ; (3BCC:12A2=0)
                push    cs
                pop     es
                mov     di,data_83e             ; (3BCC:1252=0)
                mov     cx,14h
                xor     ax,ax                   ; Zero register
                rep     stosw                   ; Rep when cx >0 Store ax to es:[di]
                mov     ds:data_108e,al         ; (3BCC:12EF=0)
                mov     ax,ds:data_75e          ; (3BCC:1245=3BCCh)
                mov     es,ax
                lds     dx,dword ptr es:data_25e        ; (3BCC:000A=0) Load 32 bit ptr
                mov     ds,ax
                add     ax,10h
                add     word ptr cs:data_28e+2,ax       ; (3BCC:001A=0)
                cmp     byte ptr cs:data_30e,0  ; (3BCC:0020=0)
                jne     loc_18                  ; Jump if not equal
                sti                             ; Enable interrupts
                mov     ax,cs:data_22e          ; (3BCC:0004=0)
                mov     word ptr ds:[100h],ax   ; (3BCC:0100=85E9h)
                mov     ax,cs:data_23e          ; (3BCC:0006=0)
                mov     word ptr ds:[102h],ax   ; (3BCC:0102=2103h)
                mov     ax,cs:data_24e          ; (3BCC:0008=0)
                mov     word ptr ds:[104h],ax   ; (3BCC:0104=5914h)
                push    word ptr cs:data_75e    ; (3BCC:1245=3BCCh)
                mov     ax,100h
                push    ax
                mov     ax,cs:data_101e         ; (3BCC:12E3=0)
                retf                            ; Return far
loc_18:
                add     cs:data_26e,ax          ; (3BCC:0012=0)
                mov     ax,cs:data_101e         ; (3BCC:12E3=0)
                mov     ss,cs:data_26e          ; (3BCC:0012=0)
                mov     sp,cs:data_27e          ; (3BCC:0014=0)
                sti                             ; Enable interrupts
                jmp     dword ptr cs:data_28e   ; (3BCC:0018=0)
loc_19:
                cmp     sp,100h
                ja      loc_20                  ; Jump if above
                xor     sp,sp                   ; Zero register
loc_20:
                mov     bp,ax
                call    sub_2                   ; (0495)

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_2           proc    near
                pop     cx
                sub     cx,275h
                mov     ax,cs
                mov     bx,10h
                mul     bx                      ; dx:ax = reg * ax
                add     ax,cx
                adc     dx,0
                div     bx                      ; ax,dx rem=dx:ax/reg
                push    ax
                mov     ax,0ABh
                push    ax
                mov     ax,bp
                retf
sub_2           endp

                xor     [si+7],bh
                and     cx,[bp+4]
                aaa                             ; Ascii adjust
                mov     cx,ds:data_126e         ; (3BCC:8B4B=0)
                add     ax,0D53Ch
                add     al,3Dh                  ; '='
                adc     [di],ax
                db       3Eh, 55h, 05h, 0Fh, 9Bh, 03h
                db       14h,0CDh, 03h, 21h,0C1h, 03h
                db       27h,0BFh, 03h, 11h, 59h, 03h
                db       12h, 59h, 03h, 4Eh, 9Fh, 04h
                db       4Fh, 9Fh, 04h, 3Fh,0A5h, 0Ah
                db       40h, 8Ah, 0Bh, 42h, 90h, 0Ah
                db       57h, 41h, 0Ah, 48h, 34h, 0Eh
                db       3Dh, 00h, 4Bh, 75h, 04h, 2Eh
                db      0A2h,0E2h, 12h, 55h, 8Bh,0ECh
                db      0FFh, 76h, 06h, 2Eh, 8Fh, 06h
                db      0B3h, 12h, 5Dh, 55h, 8Bh,0ECh
                db      0E8h, 08h, 0Bh,0E8h,0D0h, 0Ah
                db      0E8h, 9Ah, 0Ah,0E8h,0F6h, 0Ah
                db      0E8h,0B4h, 0Ah, 53h,0BBh, 90h
                db       02h
loc_21:
                cmp     ah,cs:[bx]
                jne     loc_22                  ; Jump if not equal
                mov     bx,cs:[bx+1]
                xchg    bx,[bp-14h]
                cld                             ; Clear direction
                retn
loc_22:
                add     bx,3
                cmp     bx,2CCh
                jb      loc_21                  ; Jump if below
                pop     bx
loc_23:
                call    sub_16                  ; (0FBB)
                in      al,21h                  ; port 21h, 8259-1 int IMR
                mov     cs:data_102e,al         ; (3BCC:12E5=0)
                mov     al,0FFh
                out     21h,al                  ; port 21h, 8259-1 int comands
                mov     byte ptr cs:data_82e,4  ; (3BCC:1251=0)
                mov     byte ptr cs:data_81e,1  ; (3BCC:1250=0)
                call    sub_22                  ; (103C)
                call    sub_19                  ; (0FF3)
                push    ax
                mov     ax,cs:data_93e          ; (3BCC:12B3=0)
                or      ax,100h
                push    ax
                popf                            ; Pop flags
                pop     ax
                pop     bp
                jmp     dword ptr cs:data_67e   ; (3BCC:1235=0)
loc_24:
                call    sub_21                  ; (100F)
                call    sub_16                  ; (0FBB)
                call    sub_18                  ; (0FDA)
                call    sub_20                  ; (1006)
                pop     bp
                push    bp
                mov     bp,sp
                push    word ptr cs:data_93e    ; (3BCC:12B3=0)
                pop     word ptr [bp+6]
                pop     bp
                iret                            ; Interrupt return
                db      0E8h, 77h, 0Ah,0E8h, 35h, 0Bh
                db       0Ah,0C0h, 75h,0DCh,0E8h, 41h
                db       0Ah,0E8h, 18h, 02h,0B0h, 00h
                db       80h, 3Fh,0FFh, 75h, 06h, 8Ah
                db       47h, 06h, 83h,0C3h, 07h, 2Eh
                db       20h, 06h,0F0h, 12h,0F6h, 47h
                db       1Ah, 80h, 74h, 15h, 80h, 6Fh
                db       1Ah,0C8h, 2Eh, 80h, 3Eh,0F0h
                db       12h, 00h, 75h, 09h, 81h, 6Fh
                db       1Dh, 00h, 10h, 83h, 5Fh, 1Fh
                db       00h
loc_25:
                call    sub_19                  ; (0FF3)
                jmp     short loc_24            ; (055F)
                call    sub_19                  ; (0FF3)
                call    sub_24                  ; (10B4)
                call    sub_17                  ; (0FC7)
                or      al,al                   ; Zero ?
                jnz     loc_25                  ; Jump if not zero
                mov     bx,dx
                test    byte ptr [bx+15h],80h
                jz      loc_25                  ; Jump if zero
                sub     byte ptr [bx+15h],0C8h
                sub     word ptr [bx+10h],1000h
                sbb     byte ptr [bx+12h],0
                jmp     short loc_25            ; (05B6)
                jcxz    loc_27                  ; Jump if cx=0
                mov     bx,dx
                mov     si,[bx+21h]
                or      si,[bx+23h]
                jnz     loc_27                  ; Jump if not zero
                jmp     short loc_26            ; (05F7)
                mov     bx,dx
                mov     ax,[bx+0Ch]
                or      al,[bx+20h]
                jnz     loc_27                  ; Jump if not zero
loc_26:
                call    sub_7                   ; (0B39)
                jnc     loc_28                  ; Jump if carry=0
loc_27:
                jmp     loc_23                  ; (052F)
loc_28:
                call    sub_19                  ; (0FF3)
                call    sub_17                  ; (0FC7)
                call    sub_24                  ; (10B4)
                mov     [bp-4],ax
                mov     [bp-8],cx
                push    ds
                push    dx
                call    sub_3                   ; (07A1)
                cmp     word ptr [bx+14h],1
                je      loc_29                  ; Jump if equal
                mov     ax,[bx]
                add     ax,[bx+2]
                add     ax,[bx+4]
                jz      loc_29                  ; Jump if zero
                add     sp,4
                jmp     short loc_25            ; (05B6)
loc_29:
                pop     dx
                pop     ds
                mov     si,dx
                push    cs
                pop     es
                mov     di,data_94e             ; (3BCC:12B5=0)
                mov     cx,25h
                rep     movsb                   ; Rep when cx >0 Mov [si] to es:[di]
                mov     di,data_94e             ; (3BCC:12B5=0)
                push    cs
                pop     ds
                mov     ax,[di+10h]
                mov     dx,[di+12h]
                add     ax,100Fh
                adc     dx,0
                and     ax,0FFF0h
                mov     [di+10h],ax
                mov     [di+12h],dx
                sub     ax,0FFCh
                sbb     dx,0
                mov     [di+21h],ax
                mov     [di+23h],dx
                mov     word ptr [di+0Eh],1
                mov     cx,1Ch
                mov     dx,di
                mov     ah,27h                  ; '''
                call    sub_24                  ; (10B4)
                jmp     loc_25                  ; (05B6)
                db       0Eh, 07h, 8Bh,0F2h
                db      0BFh,0B5h, 12h,0B9h, 25h, 00h
                db      0F3h,0A4h, 1Eh, 52h, 0Eh, 1Fh
                db      0BAh,0B5h, 12h,0B4h, 0Fh,0E8h
                db       2Eh, 0Ah,0B4h, 10h,0E8h, 29h
                db       0Ah,0F6h, 06h,0CAh, 12h, 80h
                db       5Eh, 1Fh, 74h, 7Eh, 2Eh,0C4h
                db       1Eh,0C5h, 12h, 8Ch,0C0h, 81h
                db      0EBh, 00h, 10h, 1Dh, 00h, 00h
                db       33h,0D2h, 2Eh, 8Bh, 0Eh,0C3h
                db       12h, 49h, 03h,0D9h, 15h, 00h
                db       00h, 41h,0F7h,0F1h, 89h, 44h
                db       23h, 92h, 93h,0F7h,0F1h, 89h
                db       44h, 21h,0E9h,0F7h,0FEh, 2Eh
                db       83h, 26h,0B3h, 12h,0FEh,0E8h
                db       2Bh, 09h,0E8h,0E9h, 09h,0E8h
                db      0F9h, 08h, 73h, 09h, 2Eh, 83h
                db       0Eh,0B3h, 12h, 01h,0E9h,0DDh
                db      0FEh
loc_30:
                call    sub_3                   ; (07A1)
                test    byte ptr [bx+19h],80h
                jnz     loc_31                  ; Jump if not zero
                jmp     loc_25                  ; (05B6)
loc_31:
                sub     word ptr [bx+1Ah],1000h
                sbb     word ptr [bx+1Ch],0
                sub     byte ptr [bx+19h],0C8h
                jmp     loc_25                  ; (05B6)
                push    cx
                and     cx,7
                cmp     cx,7
                je      loc_35                  ; Jump if equal
                pop     cx
                call    sub_13                  ; (0EE6)
                call    sub_24                  ; (10B4)
                call    sub_14                  ; (0F8C)
                pushf                           ; Push flags
                cmp     byte ptr cs:data_95e,0  ; (3BCC:12DA=0)
                je      loc_33                  ; Jump if equal
                popf                            ; Pop flags
loc_32:
                jmp     loc_23                  ; (052F)
loc_33:
                popf                            ; Pop flags
                jc      loc_34                  ; Jump if carry Set
                mov     bx,ax
                mov     ah,3Eh                  ; '>'
                call    sub_24                  ; (10B4)
                jmp     short loc_36            ; (0731)
loc_34:
                or      byte ptr cs:data_93e,1  ; (3BCC:12B3=0)
                mov     [bp-4],ax
                jmp     loc_25                  ; (05B6)
loc_35:
                pop     cx
                jmp     loc_23                  ; (052F)
loc_36:
                call    sub_9                   ; (0B91)
                call    sub_8                   ; (0B45)
                jc      loc_38                  ; Jump if carry Set
                cmp     byte ptr cs:data_84e,0  ; (3BCC:12A2=0)
                je      loc_38                  ; Jump if equal
                call    sub_10                  ; (0B9E)
                cmp     bx,0FFFFh
                je      loc_38                  ; Jump if equal
                dec     byte ptr cs:data_84e    ; (3BCC:12A2=0)
                push    cs
                pop     es
                mov     di,data_83e             ; (3BCC:1252=0)
                mov     cx,14h
                xor     ax,ax                   ; Zero register
                repne   scasw                   ; Rep zf=0+cx >0 Scan es:[di] for ax
                mov     ax,cs:data_85e          ; (3BCC:12A3=0)
                mov     es:[di-2],ax
                mov     es:[di+26h],bx
                mov     [bp-4],bx
loc_37:
                and     byte ptr cs:data_93e,0FEh       ; (3BCC:12B3=0)
                jmp     loc_25                  ; (05B6)
loc_38:
                jmp     loc_23                  ; (052F)
                db       0Eh, 07h,0E8h, 17h, 04h
                db      0BFh, 52h, 12h,0B9h, 14h, 00h
                db       2Eh,0A1h,0A3h, 12h
loc_39:
                repne   scasw                   ; Rep zf=0+cx >0 Scan es:[di] for ax
                jnz     loc_40                  ; Jump if not zero
                cmp     bx,es:[di+26h]
                jne     loc_39                  ; Jump if not equal
                mov     word ptr es:[di-2],0
                call    sub_4                   ; (09B3)
                inc     byte ptr cs:data_84e    ; (3BCC:12A2=0)
                jmp     short loc_37            ; (0769)
loc_40:
                jmp     loc_23                  ; (052F)

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_3           proc    near
                push    es
                mov     ah,2Fh                  ; '/'
                call    sub_24                  ; (10B4)
                push    es
                pop     ds
                pop     es
                retn
sub_3           endp

                or      al,al                   ; Zero ?
                jz      loc_41                  ; Jump if zero
                jmp     loc_48                  ; (0900)
loc_41:
                push    ds
                push    dx
                mov     cs:data_58e,bx          ; (3BCC:1224=0)
                mov     word ptr cs:data_58e+2,es       ; (3BCC:1226=3BCCh)
                lds     si,dword ptr cs:data_58e        ; (3BCC:1224=0) Load 32 bit ptr
                mov     di,data_110e            ; (3BCC:12F1=0)
                mov     cx,0Eh
                push    cs
                pop     es
                rep     movsb                   ; Rep when cx >0 Mov [si] to es:[di]
                pop     si
                pop     ds
                mov     di,data_115e            ; (3BCC:1307=0)
                mov     cx,50h
                rep     movsb                   ; Rep when cx >0 Mov [si] to es:[di]
                mov     bx,0FFFFh
                call    sub_23                  ; (105A)
                call    sub_19                  ; (0FF3)
                pop     bp
                pop     word ptr cs:data_103e   ; (3BCC:12E6=0)
                pop     word ptr cs:data_104e   ; (3BCC:12E8=0)
                pop     word ptr cs:data_93e    ; (3BCC:12B3=0)
                mov     ax,4B01h
                push    cs
                pop     es
                mov     bx,12F1h
                pushf                           ; Push flags
                call    dword ptr cs:data_67e   ; (3BCC:1235=0)
                jnc     loc_42                  ; Jump if carry=0
                or      word ptr cs:data_93e,1  ; (3BCC:12B3=0)
                push    word ptr cs:data_93e    ; (3BCC:12B3=0)
                push    word ptr cs:data_104e   ; (3BCC:12E8=0)
                push    word ptr cs:data_103e   ; (3BCC:12E6=0)
                push    bp
                mov     bp,sp
                les     bx,dword ptr cs:data_58e        ; (3BCC:1224=0) Load 32 bit ptr
                jmp     loc_24                  ; (055F)
loc_42:
                call    sub_9                   ; (0B91)
                push    cs
                pop     es
                mov     di,data_83e             ; (3BCC:1252=0)
                mov     cx,14h
loc_43:
                mov     ax,cs:data_85e          ; (3BCC:12A3=0)
                repne   scasw                   ; Rep zf=0+cx >0 Scan es:[di] for ax
                jnz     loc_44                  ; Jump if not zero
                mov     word ptr es:[di-2],0
                inc     byte ptr cs:data_84e    ; (3BCC:12A2=0)
                jmp     short loc_43            ; (082B)
loc_44:
                lds     si,dword ptr cs:data_113e       ; (3BCC:1303=0) Load 32 bit ptr
                cmp     si,1
                jne     loc_45                  ; Jump if not equal
                mov     dx,ds:data_6e           ; (0000:001A=0F000h)
                add     dx,10h
                mov     ah,51h                  ; 'Q'
                call    sub_24                  ; (10B4)
                add     dx,bx
                mov     word ptr cs:data_113e+2,dx      ; (3BCC:1305=0)
                push    word ptr ds:data_5e     ; (0000:0018=0EB52h)
                pop     word ptr cs:data_113e   ; (3BCC:1303=0)
                add     bx,10h
                add     bx,ds:data_3e           ; (0000:0012=70h)
                mov     cs:data_112e,bx         ; (3BCC:1301=0)
                push    word ptr ds:data_4e     ; (0000:0014=0FF54h)
                pop     word ptr cs:data_111e   ; (3BCC:12FF=0)
                jmp     short loc_46            ; (089F)
loc_45:
                mov     ax,[si]
                add     ax,[si+2]
                add     ax,[si+4]
                jz      loc_47                  ; Jump if zero
                push    cs
                pop     ds
                mov     dx,1307h
                call    sub_8                   ; (0B45)
                call    sub_10                  ; (0B9E)
                inc     byte ptr cs:data_108e   ; (3BCC:12EF=0)
                call    sub_4                   ; (09B3)
                dec     byte ptr cs:data_108e   ; (3BCC:12EF=0)
loc_46:
                mov     ah,51h                  ; 'Q'
                call    sub_24                  ; (10B4)
                call    sub_21                  ; (100F)
                call    sub_16                  ; (0FBB)
                call    sub_18                  ; (0FDA)
                call    sub_20                  ; (1006)
                mov     ds,bx
                mov     es,bx
                push    word ptr cs:data_93e    ; (3BCC:12B3=0)
                push    word ptr cs:data_104e   ; (3BCC:12E8=0)
                push    word ptr cs:data_103e   ; (3BCC:12E6=0)
                pop     word ptr ds:data_10e    ; (068A:000A=6E41h)
                pop     word ptr ds:data_10e+2  ; (068A:000C=7264h)
                push    ds
                lds     dx,dword ptr ds:data_10e        ; (068A:000A=6E41h) Load 32 bit ptr
                mov     al,22h                  ; '"'
                call    sub_27                  ; (11BC)
                pop     ds
                popf                            ; Pop flags
                pop     ax
                mov     ss,cs:data_112e         ; (3BCC:1301=0)
                mov     sp,cs:data_111e         ; (3BCC:12FF=0)
                jmp     dword ptr cs:data_113e  ; (3BCC:1303=0)
loc_47:
                mov     bx,[si+1]
                mov     ax,ds:data_12e[bx+si]   ; (068A:FD9F=6580h)
                mov     [si],ax
                mov     ax,ds:data_13e[bx+si]   ; (068A:FDA1=0C004h)
                mov     [si+2],ax
                mov     ax,ds:data_14e[bx+si]   ; (068A:FDA3=8026h)
                mov     [si+4],ax
                jmp     short loc_46            ; (089F)
loc_48:
                cmp     al,1
                je      loc_49                  ; Jump if equal
                jmp     loc_23                  ; (052F)
loc_49:
                or      word ptr cs:data_93e,1  ; (3BCC:12B3=0)
                mov     cs:data_58e,bx          ; (3BCC:1224=0)
                mov     word ptr cs:data_58e+2,es       ; (3BCC:1226=3BCCh)
                call    sub_19                  ; (0FF3)
                call    sub_24                  ; (10B4)
                call    sub_17                  ; (0FC7)
                les     bx,dword ptr cs:data_58e        ; (3BCC:1224=0) Load 32 bit ptr
                lds     si,dword ptr es:[bx+12h]        ; Load 32 bit ptr
                jc      loc_52                  ; Jump if carry Set
                and     byte ptr cs:data_93e,0FEh       ; (3BCC:12B3=0)
                cmp     si,1
                je      loc_50                  ; Jump if equal
                mov     ax,[si]
                add     ax,[si+2]
                add     ax,[si+4]
                jnz     loc_51                  ; Jump if not zero
                mov     bx,[si+1]
                mov     ax,ds:data_7e[bx+si]    ; (0000:FD9F=19B4h)
                mov     [si],ax
                mov     ax,ds:data_8e[bx+si]    ; (0000:FDA1=21CDh)
                mov     [si+2],ax
                mov     ax,ds:data_9e[bx+si]    ; (0000:FDA3=0B450h)
                mov     [si+4],ax
                jmp     short loc_51            ; (0985)
loc_50:
                mov     dx,ds:data_6e           ; (0000:001A=0F000h)
                call    sub_9                   ; (0B91)
                mov     cx,cs:data_85e          ; (3BCC:12A3=0)
                add     cx,10h
                add     dx,cx
                mov     es:[bx+14h],dx
                mov     ax,ds:data_5e           ; (0000:0018=0EB52h)
                mov     es:[bx+12h],ax
                mov     ax,ds:data_3e           ; (0000:0012=70h)
                add     ax,cx
                mov     es:[bx+10h],ax
                mov     ax,ds:data_4e           ; (0000:0014=0FF54h)
                mov     es:[bx+0Eh],ax
loc_51:
                call    sub_9                   ; (0B91)
                mov     ds,cs:data_85e          ; (3BCC:12A3=0)
                mov     ax,[bp+2]
                mov     ds:data_1e,ax           ; (0000:000A=3E6h)
                mov     ax,[bp+4]
                mov     word ptr ds:data_1e+2,ax        ; (0000:000C=6F4h)
loc_52:
                jmp     loc_25                  ; (05B6)
                mov     byte ptr cs:data_109e,0 ; (3BCC:12F0=0)
                mov     ah,2Ah                  ; '*'
                call    sub_24                  ; (10B4)
                cmp     dx,916h
                jb      loc_53                  ; Jump if below
                call    sub_28                  ; (11D2)
loc_53:
                jmp     loc_23                  ; (052F)

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_4           proc    near
                call    sub_13                  ; (0EE6)
                call    sub_5                   ; (0A75)
                mov     byte ptr ds:data_30e,1  ; (3BCC:0020=0)
                cmp     word ptr ds:[1200h],5A4Dh       ; (3BCC:1200=70h)
                je      loc_54                  ; Jump if equal
                cmp     word ptr ds:[1200h],4D5Ah       ; (3BCC:1200=70h)
                je      loc_54                  ; Jump if equal
                dec     byte ptr ds:data_30e    ; (3BCC:0020=0)
                jz      loc_57                  ; Jump if zero
loc_54:
                mov     ax,word ptr ds:[1204h]  ; (3BCC:1204=32Eh)
                shl     cx,1                    ; Shift w/zeros fill
                mul     cx                      ; dx:ax = reg * ax
                add     ax,200h
                cmp     ax,si
                jb      loc_56                  ; Jump if below
                mov     ax,word ptr ds:[120Ah]  ; (3BCC:120A=8EEFh)
                or      ax,word ptr ds:[120Ch]  ; (3BCC:120C=0)
                jz      loc_56                  ; Jump if zero
                mov     ax,ds:data_88e          ; (3BCC:12A9=0)
                mov     dx,ds:data_89e          ; (3BCC:12AB=0)
                mov     cx,200h
                div     cx                      ; ax,dx rem=dx:ax/reg
                or      dx,dx                   ; Zero ?
                jz      loc_55                  ; Jump if zero
                inc     ax
loc_55:
                mov     word ptr ds:[1204h],ax  ; (3BCC:1204=32Eh)
                mov     word ptr ds:[1202h],dx  ; (3BCC:1202=0E33h)
                cmp     word ptr ds:[1214h],1   ; (3BCC:1214=8D8Eh)
                je      loc_58                  ; Jump if equal
                mov     word ptr ds:[1214h],1   ; (3BCC:1214=8D8Eh)
                mov     ax,si
                sub     ax,word ptr ds:[1208h]  ; (3BCC:1208=1111h)
                mov     word ptr ds:[1216h],ax  ; (3BCC:1216=1111h)
                add     word ptr ds:[1204h],8   ; (3BCC:1204=32Eh)
                mov     word ptr ds:[120Eh],ax  ; (3BCC:120E=1111h)
                mov     word ptr ds:[1210h],1000h       ; (3BCC:1210=1250h)
                call    sub_6                   ; (0AD3)
loc_56:
                jmp     short loc_58            ; (0A6C)
loc_57:
                cmp     si,0F00h
                jae     loc_58                  ; Jump if above or =
                mov     ax,word ptr ds:[1200h]  ; (3BCC:1200=70h)
                mov     ds:data_22e,ax          ; (3BCC:0004=0)
                add     dx,ax
                mov     ax,word ptr ds:[1202h]  ; (3BCC:1202=0E33h)
                mov     ds:data_23e,ax          ; (3BCC:0006=0)
                add     dx,ax
                mov     ax,word ptr ds:[1204h]  ; (3BCC:1204=32Eh)
                mov     ds:data_24e,ax          ; (3BCC:0008=0)
                add     dx,ax
                jz      loc_58                  ; Jump if zero
                mov     cl,0E9h
                mov     byte ptr ds:[1200h],cl  ; (3BCC:1200=70h)
                mov     ax,10h
                mul     si                      ; dx:ax = reg * ax
                add     ax,265h
                mov     word ptr ds:[1201h],ax  ; (3BCC:1201=3300h)
                mov     ax,word ptr ds:[1200h]  ; (3BCC:1200=70h)
                add     ax,word ptr ds:[1202h]  ; (3BCC:1202=0E33h)
                neg     ax
                mov     word ptr ds:[1204h],ax  ; (3BCC:1204=32Eh)
                call    sub_6                   ; (0AD3)
loc_58:
                mov     ah,3Eh                  ; '>'
                call    sub_24                  ; (10B4)
                call    sub_14                  ; (0F8C)
                retn
sub_4           endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_5           proc    near
                push    cs
                pop     ds
                mov     ax,5700h
                call    sub_24                  ; (10B4)
                mov     ds:data_61e,cx          ; (3BCC:1229=0)
                mov     ds:data_62e,dx          ; (3BCC:122B=0)
                mov     ax,4200h
                xor     cx,cx                   ; Zero register
                mov     dx,cx
                call    sub_24                  ; (10B4)
                mov     ah,3Fh                  ; '?'
                mov     cl,1Ch
                mov     dx,1200h
                call    sub_24                  ; (10B4)
                mov     ax,4200h
                xor     cx,cx                   ; Zero register
                mov     dx,cx
                call    sub_24                  ; (10B4)
                mov     ah,3Fh                  ; '?'
                mov     cl,1Ch
                mov     dx,4
                call    sub_24                  ; (10B4)
                mov     ax,4202h
                xor     cx,cx                   ; Zero register
                mov     dx,cx
                call    sub_24                  ; (10B4)
                mov     ds:data_88e,ax          ; (3BCC:12A9=0)
                mov     ds:data_89e,dx          ; (3BCC:12AB=0)
                mov     di,ax
                add     ax,0Fh
                adc     dx,0
                and     ax,0FFF0h
                sub     di,ax
                mov     cx,10h
                div     cx                      ; ax,dx rem=dx:ax/reg
                mov     si,ax
                retn
sub_5           endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_6           proc    near
                mov     ax,4200h
                xor     cx,cx                   ; Zero register
                mov     dx,cx
                call    sub_24                  ; (10B4)
                mov     ah,40h                  ; '@'
                mov     cl,1Ch
                mov     dx,1200h
                call    sub_24                  ; (10B4)
                mov     ax,10h
                mul     si                      ; dx:ax = reg * ax
                mov     cx,dx
                mov     dx,ax
                mov     ax,4200h
                call    sub_24                  ; (10B4)
                xor     dx,dx                   ; Zero register
                mov     cx,1000h
                add     cx,di
                mov     ah,40h                  ; '@'
                call    sub_24                  ; (10B4)
                mov     ax,5701h
                mov     cx,ds:data_61e          ; (3BCC:1229=0)
                mov     dx,ds:data_62e          ; (3BCC:122B=0)
                test    dh,80h
                jnz     loc_59                  ; Jump if not zero
                add     dh,0C8h
loc_59:
                call    sub_24                  ; (10B4)
                cmp     byte ptr ds:data_107e,3 ; (3BCC:12EE=0)
                jb      loc_ret_60              ; Jump if below
                cmp     byte ptr ds:data_108e,0 ; (3BCC:12EF=0)
                je      loc_ret_60              ; Jump if equal
                push    bx
                mov     dl,ds:data_60e          ; (3BCC:1228=0)
                mov     ah,32h                  ; '2'
                call    sub_24                  ; (10B4)
                mov     ax,cs:data_106e         ; (3BCC:12EC=0)
                mov     [bx+1Eh],ax
                pop     bx

loc_ret_60:
                retn
sub_6           endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_7           proc    near
                call    sub_21                  ; (100F)
                mov     di,dx
                add     di,0Dh
                push    ds
                pop     es
                jmp     short loc_62            ; (0B65)

;ßßßß External Entry into Subroutine ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß

sub_8:
                call    sub_21                  ; (100F)
                push    ds
                pop     es
                mov     di,dx
                mov     cx,50h
                xor     ax,ax                   ; Zero register
                mov     bl,0
                cmp     byte ptr [di+1],3Ah     ; ':'
                jne     loc_61                  ; Jump if not equal
                mov     bl,[di]
                and     bl,1Fh
loc_61:
                mov     cs:data_60e,bl          ; (3BCC:1228=0)
                repne   scasb                   ; Rep zf=0+cx >0 Scan es:[di] for al
loc_62:
                mov     ax,[di-3]
                and     ax,0DFDFh
                add     ah,al
                mov     al,[di-4]
                and     al,0DFh
                add     al,ah
                mov     byte ptr cs:data_30e,0  ; (3BCC:0020=0)
                cmp     al,0DFh
                je      loc_63                  ; Jump if equal
                inc     byte ptr cs:data_30e    ; (3BCC:0020=0)
                cmp     al,0E2h
                jne     loc_64                  ; Jump if not equal
loc_63:
                call    sub_20                  ; (1006)
                clc                             ; Clear carry flag
                retn
loc_64:
                call    sub_20                  ; (1006)
                stc                             ; Set carry flag
                retn
sub_7           endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_9           proc    near
                push    bx
                mov     ah,51h                  ; 'Q'
                call    sub_24                  ; (10B4)
                mov     cs:data_85e,bx          ; (3BCC:12A3=0)
                pop     bx
                retn
sub_9           endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_10          proc    near
                call    sub_13                  ; (0EE6)
                push    dx
                mov     dl,cs:data_60e          ; (3BCC:1228=0)
                mov     ah,36h                  ; '6'
                call    sub_24                  ; (10B4)
                mul     cx                      ; dx:ax = reg * ax
                mul     bx                      ; dx:ax = reg * ax
                mov     bx,dx
                pop     dx
                or      bx,bx                   ; Zero ?
                jnz     loc_65                  ; Jump if not zero
                cmp     ax,4000h
                jb      loc_66                  ; Jump if below
loc_65:
                mov     ax,4300h
                call    sub_24                  ; (10B4)
                jc      loc_66                  ; Jump if carry Set
                mov     di,cx
                xor     cx,cx                   ; Zero register
                mov     ax,4301h
                call    sub_24                  ; (10B4)
                cmp     byte ptr cs:data_95e,0  ; (3BCC:12DA=0)
                jne     loc_66                  ; Jump if not equal
                mov     ax,3D02h
                call    sub_24                  ; (10B4)
                jc      loc_66                  ; Jump if carry Set
                mov     bx,ax
                mov     cx,di
                mov     ax,4301h
                call    sub_24                  ; (10B4)
                push    bx
                mov     dl,cs:data_60e          ; (3BCC:1228=0)
                mov     ah,32h                  ; '2'
                call    sub_24                  ; (10B4)
                mov     ax,[bx+1Eh]
                mov     cs:data_106e,ax         ; (3BCC:12EC=0)
                pop     bx
                call    sub_14                  ; (0F8C)
                retn
loc_66:
                xor     bx,bx                   ; Zero register
                dec     bx
                call    sub_14                  ; (0F8C)
                retn
sub_10          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_11          proc    near
                push    cx
                push    dx
                push    ax
                mov     ax,4400h
                call    sub_24                  ; (10B4)
                xor     dl,80h
                test    dl,80h
                jz      loc_67                  ; Jump if zero
                mov     ax,5700h
                call    sub_24                  ; (10B4)
                test    dh,80h
loc_67:
                pop     ax
                pop     dx
                pop     cx
                retn
sub_11          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_12          proc    near
                call    sub_21                  ; (100F)
                mov     ax,4201h
                xor     cx,cx                   ; Zero register
                xor     dx,dx                   ; Zero register
                call    sub_24                  ; (10B4)
                mov     cs:data_86e,ax          ; (3BCC:12A5=0)
                mov     cs:data_87e,dx          ; (3BCC:12A7=0)
                mov     ax,4202h
                xor     cx,cx                   ; Zero register
                xor     dx,dx                   ; Zero register
                call    sub_24                  ; (10B4)
                mov     cs:data_88e,ax          ; (3BCC:12A9=0)
                mov     cs:data_89e,dx          ; (3BCC:12AB=0)
                mov     ax,4200h
                mov     dx,cs:data_86e          ; (3BCC:12A5=0)
                mov     cx,cs:data_87e          ; (3BCC:12A7=0)
                call    sub_24                  ; (10B4)
                call    sub_20                  ; (1006)
                retn
sub_12          endp

                or      al,al                   ; Zero ?
                jnz     loc_70                  ; Jump if not zero
                and     word ptr cs:data_93e,0FFFEh     ; (3BCC:12B3=0)
                call    sub_19                  ; (0FF3)
                call    sub_24                  ; (10B4)
                jc      loc_69                  ; Jump if carry Set
                test    dh,80h
                jz      loc_68                  ; Jump if zero
                sub     dh,0C8h
loc_68:
                jmp     loc_24                  ; (055F)
loc_69:
                or      word ptr cs:data_93e,1  ; (3BCC:12B3=0)
                jmp     loc_24                  ; (055F)
loc_70:
                cmp     al,1
                jne     loc_73                  ; Jump if not equal
                and     word ptr cs:data_93e,0FFFEh     ; (3BCC:12B3=0)
                test    dh,80h
                jz      loc_71                  ; Jump if zero
                sub     dh,0C8h
loc_71:
                call    sub_11                  ; (0C06)
                jz      loc_72                  ; Jump if zero
                add     dh,0C8h
loc_72:
                call    sub_24                  ; (10B4)
                mov     [bp-4],ax
                adc     word ptr cs:data_93e,0  ; (3BCC:12B3=0)
                jmp     loc_25                  ; (05B6)
                cmp     al,2
                jne     loc_73                  ; Jump if not equal
                call    sub_11                  ; (0C06)
                jz      loc_73                  ; Jump if zero
                sub     word ptr [bp-0Ah],1000h
                sbb     word ptr [bp-8],0
loc_73:
                jmp     loc_23                  ; (052F)
                and     byte ptr cs:data_93e,0FEh       ; (3BCC:12B3=0)
                call    sub_11                  ; (0C06)
                jz      loc_73                  ; Jump if zero
                mov     cs:data_91e,cx          ; (3BCC:12AF=0)
                mov     cs:data_90e,dx          ; (3BCC:12AD=0)
                mov     word ptr cs:data_92e,0  ; (3BCC:12B1=0)
                call    sub_12                  ; (0C24)
                mov     ax,cs:data_88e          ; (3BCC:12A9=0)
                mov     dx,cs:data_89e          ; (3BCC:12AB=0)
                sub     ax,1000h
                sbb     dx,0
                sub     ax,cs:data_86e          ; (3BCC:12A5=0)
                sbb     dx,cs:data_87e          ; (3BCC:12A7=0)
                jns     loc_74                  ; Jump if not sign
                mov     word ptr [bp-4],0
                jmp     loc_37                  ; (0769)
loc_74:
                jnz     loc_75                  ; Jump if not zero
                cmp     ax,cx
                ja      loc_75                  ; Jump if above
                mov     cs:data_91e,ax          ; (3BCC:12AF=0)
loc_75:
                mov     dx,cs:data_86e          ; (3BCC:12A5=0)
                mov     cx,cs:data_87e          ; (3BCC:12A7=0)
                or      cx,cx                   ; Zero ?
                jnz     loc_76                  ; Jump if not zero
                cmp     dx,1Ch
                jbe     loc_77                  ; Jump if below or =
loc_76:
                mov     dx,cs:data_90e          ; (3BCC:12AD=0)
                mov     cx,cs:data_91e          ; (3BCC:12AF=0)
                mov     ah,3Fh                  ; '?'
                call    sub_24                  ; (10B4)
                add     ax,cs:data_92e          ; (3BCC:12B1=0)
                mov     [bp-4],ax
                jmp     loc_25                  ; (05B6)
loc_77:
                mov     si,dx
                mov     di,dx
                add     di,cs:data_91e          ; (3BCC:12AF=0)
                cmp     di,1Ch
                jb      loc_78                  ; Jump if below
                xor     di,di                   ; Zero register
                jmp     short loc_79            ; (0D55)
loc_78:
                sub     di,1Ch
                neg     di
loc_79:
                mov     ax,dx
                mov     cx,cs:data_89e          ; (3BCC:12AB=0)
                mov     dx,cs:data_88e          ; (3BCC:12A9=0)
                add     dx,0Fh
                adc     cx,0
                and     dx,0FFF0h
                sub     dx,0FFCh
                sbb     cx,0
                add     dx,ax
                adc     cx,0
                mov     ax,4200h
                call    sub_24                  ; (10B4)
                mov     cx,1Ch
                sub     cx,di
                sub     cx,si
                mov     ah,3Fh                  ; '?'
                mov     dx,cs:data_90e          ; (3BCC:12AD=0)
                call    sub_24                  ; (10B4)
                add     cs:data_90e,ax          ; (3BCC:12AD=0)
                sub     cs:data_91e,ax          ; (3BCC:12AF=0)
                add     cs:data_92e,ax          ; (3BCC:12B1=0)
                xor     cx,cx                   ; Zero register
                mov     dx,1Ch
                mov     ax,4200h
                call    sub_24                  ; (10B4)
                jmp     loc_76                  ; (0D24)
                and     byte ptr cs:data_93e,0FEh       ; (3BCC:12B3=0)
                call    sub_11                  ; (0C06)
                jnz     loc_80                  ; Jump if not zero
                jmp     loc_73                  ; (0CC2)
loc_80:
                mov     cs:data_91e,cx          ; (3BCC:12AF=0)
                mov     cs:data_90e,dx          ; (3BCC:12AD=0)
                mov     word ptr cs:data_92e,0  ; (3BCC:12B1=0)
                call    sub_12                  ; (0C24)
                mov     ax,cs:data_88e          ; (3BCC:12A9=0)
                mov     dx,cs:data_89e          ; (3BCC:12AB=0)
                sub     ax,1000h
                sbb     dx,0
                sub     ax,cs:data_86e          ; (3BCC:12A5=0)
                sbb     dx,cs:data_87e          ; (3BCC:12A7=0)
                js      loc_81                  ; Jump if sign=1
                jmp     short loc_83            ; (0E67)
loc_81:
                call    sub_13                  ; (0EE6)
                push    cs
                pop     ds
                mov     dx,ds:data_88e          ; (3BCC:12A9=0)
                mov     cx,ds:data_89e          ; (3BCC:12AB=0)
                add     dx,0Fh
                adc     cx,0
                and     dx,0FFF0h
                sub     dx,0FFCh
                sbb     cx,0
                mov     ax,4200h
                call    sub_24                  ; (10B4)
                mov     dx,4
                mov     cx,1Ch
                mov     ah,3Fh                  ; '?'
                call    sub_24                  ; (10B4)
                mov     ax,4200h
                xor     cx,cx                   ; Zero register
                mov     dx,cx
                call    sub_24                  ; (10B4)
                mov     dx,4
                mov     cx,1Ch
                mov     ah,40h                  ; '@'
                call    sub_24                  ; (10B4)
                mov     dx,0F000h
                mov     cx,0FFFFh
                mov     ax,4202h
                call    sub_24                  ; (10B4)
                mov     ah,40h                  ; '@'
                xor     cx,cx                   ; Zero register
                call    sub_24                  ; (10B4)
                mov     dx,ds:data_86e          ; (3BCC:12A5=0)
                mov     cx,ds:data_87e          ; (3BCC:12A7=0)
                mov     ax,4200h
                call    sub_24                  ; (10B4)
                mov     ax,5700h
                call    sub_24                  ; (10B4)
                test    dh,80h
                jz      loc_82                  ; Jump if zero
                sub     dh,0C8h
                mov     ax,5701h
                call    sub_24                  ; (10B4)
loc_82:
                call    sub_14                  ; (0F8C)
                jmp     loc_23                  ; (052F)
loc_83:
                jnz     loc_84                  ; Jump if not zero
                cmp     ax,cx
                ja      loc_84                  ; Jump if above
                jmp     loc_81                  ; (0DE9)
loc_84:
                mov     dx,cs:data_86e          ; (3BCC:12A5=0)
                mov     cx,cs:data_87e          ; (3BCC:12A7=0)
                or      cx,cx                   ; Zero ?
                jnz     loc_85                  ; Jump if not zero
                cmp     dx,1Ch
                ja      loc_85                  ; Jump if above
                jmp     loc_81                  ; (0DE9)
loc_85:
                call    sub_19                  ; (0FF3)
                call    sub_24                  ; (10B4)
                call    sub_17                  ; (0FC7)
                mov     ax,5700h
                call    sub_24                  ; (10B4)
                test    dh,80h
                jnz     loc_86                  ; Jump if not zero
                add     dh,0C8h
                mov     ax,5701h
                call    sub_24                  ; (10B4)
loc_86:
                jmp     loc_25                  ; (05B6)
                jmp     loc_23                  ; (052F)
                pop     word ptr cs:data_73e    ; (3BCC:1241=0)
                pop     word ptr cs:data_73e+2  ; (3BCC:1243=0)
                pop     word ptr cs:data_96e    ; (3BCC:12DB=0)
                and     word ptr cs:data_96e,0FFFEh     ; (3BCC:12DB=0)
                cmp     byte ptr cs:data_95e,0  ; (3BCC:12DA=0)
                jne     loc_87                  ; Jump if not equal
                push    word ptr cs:data_96e    ; (3BCC:12DB=0)
                call    dword ptr cs:data_63e   ; (3BCC:122D=0)
                jnc     loc_88                  ; Jump if carry=0
                inc     byte ptr cs:data_95e    ; (3BCC:12DA=0)
loc_87:
                stc                             ; Set carry flag
loc_88:
                jmp     dword ptr cs:data_73e   ; (3BCC:1241=0)
                xor     al,al                   ; Zero register
                mov     byte ptr cs:data_95e,1  ; (3BCC:12DA=0)
                iret                            ; Interrupt return

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_13          proc    near
                mov     byte ptr cs:data_95e,0  ; (3BCC:12DA=0)
                call    sub_21                  ; (100F)
                push    cs
                pop     ds
                mov     al,13h
                call    sub_1                   ; (02B5)
                mov     ds:data_63e,bx          ; (3BCC:122D=0)
                mov     word ptr ds:data_63e+2,es       ; (3BCC:122F=70h)
                mov     ds:data_69e,bx          ; (3BCC:1239=0)
                mov     word ptr ds:data_69e+2,es       ; (3BCC:123B=70h)
                mov     dl,0
                mov     al,0Dh
                call    sub_1                   ; (02B5)
                mov     ax,es
                cmp     ax,0C000h
                jae     loc_89                  ; Jump if above or =
                mov     dl,2
loc_89:
                mov     al,0Eh
                call    sub_1                   ; (02B5)
                mov     ax,es
                cmp     ax,0C000h
                jae     loc_90                  ; Jump if above or =
                mov     dl,2
loc_90:
                mov     ds:data_81e,dl          ; (3BCC:1250=0)
                call    sub_22                  ; (103C)
                mov     ds:data_97e,ss          ; (3BCC:12DD=0EF4h)
                mov     ds:data_98e,sp          ; (3BCC:12DF=0)
                push    cs
                mov     ax,0D40h
                push    ax
                mov     ax,70h
                mov     es,ax
                mov     cx,0FFFFh
                mov     al,0CBh
                xor     di,di                   ; Zero register
                repne   scasb                   ; Rep zf=0+cx >0 Scan es:[di] for al
                dec     di
                pushf                           ; Push flags
                push    es
                push    di
                pushf                           ; Push flags
                pop     ax
                or      ah,1
                push    ax
                in      al,21h                  ; port 21h, 8259-1 int IMR
                mov     ds:data_102e,al         ; (3BCC:12E5=0)
                mov     al,0FFh
                out     21h,al                  ; port 21h, 8259-1 int comands
                popf                            ; Pop flags
                xor     ax,ax                   ; Zero register
                jmp     dword ptr ds:data_63e   ; (3BCC:122D=0)
loc_91:
                lds     dx,dword ptr ds:data_65e        ; (3BCC:1231=0) Load 32 bit ptr
                mov     al,1
                call    sub_27                  ; (11BC)
                push    cs
                pop     ds
                mov     dx,0C89h
                mov     al,13h
                call    sub_27                  ; (11BC)
                mov     al,24h                  ; '$'
                call    sub_1                   ; (02B5)
                mov     ds:data_71e,bx          ; (3BCC:123D=0)
                mov     word ptr ds:data_71e+2,es       ; (3BCC:123F=70h)
                mov     dx,0CBDh
                mov     al,24h                  ; '$'
                call    sub_27                  ; (11BC)
                call    sub_20                  ; (1006)
                retn
sub_13          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_14          proc    near
loc_92:
                call    sub_21                  ; (100F)
                lds     dx,dword ptr cs:data_69e        ; (3BCC:1239=0) Load 32 bit ptr
                mov     al,13h
                call    sub_27                  ; (11BC)
                lds     dx,dword ptr cs:data_71e        ; (3BCC:123D=0) Load 32 bit ptr
                mov     al,24h                  ; '$'
                call    sub_27                  ; (11BC)
                call    sub_20                  ; (1006)
                retn
sub_14          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_15          proc    near
                mov     ax,3300h
                call    sub_24                  ; (10B4)
                mov     cs:data_99e,dl          ; (3BCC:12E1=0)
                mov     ax,3301h
                xor     dl,dl                   ; Zero register
                call    sub_24                  ; (10B4)
                retn
sub_15          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_16          proc    near
                mov     dl,cs:data_99e          ; (3BCC:12E1=0)
                mov     ax,3301h
                call    sub_24                  ; (10B4)
                retn
sub_16          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_17          proc    near
                pop     word ptr cs:data_105e   ; (3BCC:12EA=0)
                pushf                           ; Push flags
                push    ax
                push    bx
                push    cx
                push    dx
                push    si
                push    di
                push    ds
                push    es
                jmp     word ptr cs:data_105e   ; (3BCC:12EA=0)

;ßßßß External Entry into Subroutine ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß

sub_18:
                les     di,dword ptr cs:data_67e        ; (3BCC:1235=0) Load 32 bit ptr
                mov     si,data_78e             ; (3BCC:124B=0)
                push    cs
                pop     ds
                cld                             ; Clear direction
                mov     cx,5

locloop_93:
                lodsb                           ; String [si] to al
                xchg    al,es:[di]
                mov     [si-1],al
                inc     di
                loop    locloop_93              ; Loop if cx > 0

                retn
sub_17          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_19          proc    near
                pop     word ptr cs:data_105e   ; (3BCC:12EA=0)
                pop     es
                pop     ds
                pop     di
                pop     si
                pop     dx
                pop     cx
                pop     bx
                pop     ax
                popf                            ; Pop flags
                jmp     word ptr cs:data_105e   ; (3BCC:12EA=0)

;ßßßß External Entry into Subroutine ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß

sub_20:
                mov     word ptr cs:data_119e,0DD3h     ; (3BCC:135D=0)
                jmp     short loc_94            ; (1016)

;ßßßß External Entry into Subroutine ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß

sub_21:
                mov     word ptr cs:data_119e,0DA7h     ; (3BCC:135D=0)
loc_94:
                mov     cs:data_117e,ss         ; (3BCC:1359=0EF4h)
                mov     cs:data_116e,sp         ; (3BCC:1357=0)
                push    cs
                pop     ss
                mov     sp,cs:data_118e         ; (3BCC:135B=0)
                call    word ptr cs:data_119e   ; (3BCC:135D=0)
                mov     cs:data_118e,sp         ; (3BCC:135B=0)
                mov     ss,cs:data_117e         ; (3BCC:1359=0EF4h)
                mov     sp,cs:data_116e         ; (3BCC:1357=0)
                retn
sub_19          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_22          proc    near
                mov     al,1
                call    sub_1                   ; (02B5)
                mov     cs:data_65e,bx          ; (3BCC:1231=0)
                mov     word ptr cs:data_65e+2,es       ; (3BCC:1233=70h)
                push    cs
                pop     ds
                mov     dx,23h
                call    sub_27                  ; (11BC)
                retn
sub_22          endp

                call    sub_23                  ; (105A)
                jmp     loc_23                  ; (052F)

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_23          proc    near
                cmp     byte ptr cs:data_100e,0 ; (3BCC:12E2=0)
                je      loc_ret_96              ; Jump if equal
                cmp     bx,0FFFFh
                jne     loc_ret_96              ; Jump if not equal
                mov     bx,160h
                call    sub_24                  ; (10B4)
                jc      loc_ret_96              ; Jump if carry Set
                mov     dx,cs
                cmp     ax,dx
                jb      loc_95                  ; Jump if below
                mov     es,ax
                mov     ah,49h                  ; 'I'
                call    sub_24                  ; (10B4)
                jmp     short loc_ret_96        ; (10AA)
loc_95:
                dec     dx
                mov     ds,dx
                mov     word ptr ds:data_19e,0  ; (3BCB:0001=0FFFFh)
                inc     dx
                mov     ds,dx
                mov     es,ax
                push    ax
                mov     cs:data_80e,ax          ; (3BCC:124E=3BCCh)
                xor     si,si                   ; Zero register
                mov     di,si
                mov     cx,0B00h
                rep     movsw                   ; Rep when cx >0 Mov [si] to es:[di]
                dec     ax
                mov     es,ax
                mov     ax,cs:data_77e          ; (3BCC:1249=0)
                mov     es:data_127e,ax         ; (48FF:0001=0)
                mov     ax,0E8Ah
                push    ax
                retf                            ; Return far

loc_ret_96:
                retn
sub_23          endp

                db       2Eh,0C6h, 06h,0F0h

locloop_97:
                adc     al,[bp+si]
                jmp     loc_23                  ; (052F)

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_24          proc    near
                pushf                           ; Push flags
                call    dword ptr cs:data_67e   ; (3BCC:1235=0)
                retn
sub_24          endp

                cli                             ; Disable interrupts
                xor     ax,ax                   ; Zero register
                mov     ss,ax
                mov     sp,7C00h
                jmp     short loc_98            ; (1114)
                esc     3,bl                    ; coprocessor escape
                esc     3,[bx+si]               ; coprocessor escape
                stc                             ; Set carry flag
                loopnz  locloop_97              ; Loop if zf=0, cx>0

                retn
                add     byte ptr ds:[1211h][bx+di],24h  ; (3BCC:1211=12h) '$'
                inc     ax
                adc     word ptr [bx+di],2412h
                inc     ax
                db      0F1h,0F1h, 12h, 24h, 40h, 81h
                db       21h, 12h, 24h, 40h, 81h, 10h
                db      0E3h,0C3h, 80h, 00h, 00h
                db      8 dup (0)
                db       82h, 44h,0F8h, 70h,0C0h, 82h
                db       44h, 80h, 88h,0C0h, 82h, 44h
                db       80h, 80h,0C0h, 82h, 44h,0F0h
                db       70h,0C0h, 82h, 28h, 80h, 08h
                db      0C0h, 82h, 28h, 80h, 88h, 00h
                db      0F2h, 10h,0F8h, 70h,0C0h
loc_98:
                push    cs
                pop     ds
                mov     dx,0B000h
                mov     ah,0Fh
                int     10h                     ; Video display   ah=functn 0Fh
                                                ;  get state, al=mode, bh=page
                cmp     al,7
                je      loc_99                  ; Jump if equal
                mov     dx,0B800h
loc_99:
                mov     es,dx
                cld                             ; Clear direction
                xor     di,di                   ; Zero register
                mov     cx,7D0h
                mov     ax,720h
                rep     stosw                   ; Rep when cx >0 Store ax to es:[di]
                mov     si,data_122e            ; (3BCC:7C0E=0)
                mov     bx,2AEh
loc_100:
                mov     bp,5
                mov     di,bx
loc_101:
                lodsb                           ; String [si] to al
                mov     dh,al
                mov     cx,8

locloop_102:
                mov     ax,720h
                shl     dx,1                    ; Shift w/zeros fill
                jnc     loc_103                 ; Jump if carry=0
                mov     al,0DBh
loc_103:
                stosw                           ; Store ax to es:[di]
                loop    locloop_102             ; Loop if cx > 0

                dec     bp
                jnz     loc_101                 ; Jump if not zero
                add     bx,0A0h
                cmp     si,7C59h
                jb      loc_100                 ; Jump if below
                mov     ah,1
                int     10h                     ; Video display   ah=functn 01h
                                                ;  set cursor mode in cx
                mov     al,8
                mov     dx,7CB9h
                call    sub_27                  ; (11BC)
                mov     ax,7FEh
                out     21h,al                  ; port 21h, 8259-1 int comands
                                                ;  al = 0FEh, IRQ0 (timer) only
                sti                             ; Enable interrupts
                xor     bx,bx                   ; Zero register
                mov     cx,1
loc_104:
                jmp     short loc_104           ; (1172)
                dec     cx
                jnz     loc_105                 ; Jump if not zero
                xor     di,di                   ; Zero register
                inc     bx
                call    sub_25                  ; (1187)
                call    sub_25                  ; (1187)
                mov     cl,4
loc_105:
                mov     al,20h                  ; ' '
                out     20h,al                  ; port 20h, 8259-1 int command
                                                ;  al = 20h, end of interrupt
                iret                            ; Interrupt return

;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_25          proc    near
                mov     cx,28h

locloop_106:
                call    sub_26                  ; (11B3)
                stosw                           ; Store ax to es:[di]
                stosw                           ; Store ax to es:[di]
                loop    locloop_106             ; Loop if cx > 0

                add     di,9Eh
                mov     cx,17h

locloop_107:
                call    sub_26                  ; (11B3)
                stosw                           ; Store ax to es:[di]
                add     di,9Eh
                loop    locloop_107             ; Loop if cx > 0

                std                             ; Set direction flag
                xor     byte ptr ds:data_125e,1 ; (3BCC:7CE7=0)
                xor     byte ptr ds:data_123e,28h       ; (3BCC:7CD7=0) '('
                xor     byte ptr ds:data_124e,28h       ; (3BCC:7CE2=0) '('
                retn
sub_25          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_26          proc    near
                and     bx,3
                mov     al,ds:data_121e[bx]     ; (3BCC:7C0A=0)
                inc     bx
                retn
sub_26          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_27          proc    near
                push    es
                push    bx
                xor     bx,bx                   ; Zero register
                mov     es,bx
                mov     bl,al
                shl     bx,1                    ; Shift w/zeros fill
                shl     bx,1                    ; Shift w/zeros fill
                mov     es:[bx],dx
                mov     es:[bx+2],ds
                pop     bx
                pop     es
                retn
sub_27          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_28          proc    near
                call    sub_13                  ; (0EE6)
                mov     dl,80h
                call    sub_29                  ; (11E2)
                xor     dl,dl                   ; Zero register
                call    sub_29                  ; (11E2)
                jmp     loc_92                  ; (0F8C)
sub_28          endp


;ßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
;                              SUBROUTINE
;ÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ

sub_29          proc    near
                mov     ax,201h
;*              call    sub_30                  ;*(11F9)
                db      0E8h, 11h, 00h
;*              jnz     loc_108                 ;*Jump if not zero
                db       75h, 15h
                add     [bp+di],dh
                sbb     si,[bx+si+0]
                add     [bx+si],al
;*              pop     cs                      ; Dangerous 8088 only
                db      0Fh
                push    ax
                adc     bh,[bx+14h]
                clc                             ; Clear carry flag
;*              pop     cs                      ; Dangerous 8088 only
                db      0Fh
                in      ax,0Fh                  ; port 0Fh, DMA-1 all mask bit
                add     [bx+di],dl
;*              call    far ptr sub_31          ;*(700C:670E)
                db       9Ah, 0Eh, 67h, 0Ch, 70h
                add     [bp+di],dh
                push    cs
                add     bx,word ptr cs:[1114h][bx+di]   ; (3BCC:1114=1F0Eh)
                adc     di,bp
                mov     es,[bx+si]
                add     [bx+di],dl
                adc     [bx+si+12h],dx
                xchg    ax,dx
                adc     cx,[bp+118Dh]
                adc     [bx+22h],di
                nop                             ;*ASM fixup - displacement
sub_29          endp


seg_a           ends



                end     start

